package bt.core.algorithms.sorting;


import java.util.PriorityQueue;
import java.util.Queue;

import bt.core.algorithms.comparators.ReverseComparator;
import bt.core.algorithms.interfaces.Comparator;
import bt.core.algorithms.interfaces.ListSorter;
import bt.core.collections.dataTypes.ArrayList;
import bt.core.collections.interfaces.List;
import bt.core.collections.iterators.Iterator;

public class HeapSort implements ListSorter {
	private final Comparator order;
	
	public HeapSort(Comparator order) {
		this.order = order;
	}
	
	@Override
	public List sort(List tape) {
		Queue queue = createPriorityQueue(tape);
		List result = new ArrayList(tape.size());
		while(!queue.isEmpty())
			result.add(queue.dequeue());
		return result;
	}

	private Queue createPriorityQueue(List tape) {
//		Comparator comp = new ReverseComparator(order);
		Queue queue = new PriorityQueue();
		Iterator it = tape.iterator();
		it.first();
		while(!it.isDone()) {
			queue.enqueue(it.current())	;
			it.next();
		}
		return queue;
	}

}
